<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>flowgraph.thread-control documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Flowgraph</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><a href="flowgraph.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flowgraph</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.edge.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edge</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.flowgraph.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flowgraph</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.queue.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>queue</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.signal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal</span></div></a></li><li class="depth-2 branch current"><a href="flowgraph.thread-control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>thread-control</span></div></a></li><li class="depth-2 branch"><a href="flowgraph.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><a href="flowgraph.vertex.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vertex</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="flowgraph.thread-control.html#var-hard-fail-error-fn"><div class="inner"><span>hard-fail-error-fn</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-job-canceller"><div class="inner"><span>job-canceller</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-launch-threads"><div class="inner"><span>launch-threads</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-possibly-start-job"><div class="inner"><span>possibly-start-job</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-recoverable-error-fn"><div class="inner"><span>recoverable-error-fn</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-stop-flow"><div class="inner"><span>stop-flow</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-thread-flow"><div class="inner"><span>thread-flow</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-unless-shutdown"><div class="inner"><span>unless-shutdown</span></div></a></li><li class="depth-1"><a href="flowgraph.thread-control.html#var-when-viable"><div class="inner"><span>when-viable</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">flowgraph.thread-control</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-hard-fail-error-fn"><h3>hard-fail-error-fn</h3><div class="usage"><code>(hard-fail-error-fn)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-job-canceller"><h3>job-canceller</h3><div class="usage"><code>(job-canceller graph)</code></div><div class="doc"><div class="markdown"><p>Produces a watch-fn that puts the graph into a cancelled state IFF the tessera is ever revoked.</p></div></div></div><div class="public anchor" id="var-launch-threads"><h3>launch-threads</h3><div class="usage"><code>(launch-threads graph guard)</code></div><div class="doc"><div class="markdown"><p>Contracted to kick off threads up to the graph’s thread-count to work on the current job. In the current implementation, this works by sending signals using signal.</p></div></div></div><div class="public anchor" id="var-possibly-start-job"><h3>possibly-start-job</h3><div class="usage"><code>(possibly-start-job graph)</code></div><div class="doc"><div class="markdown"><p>If the graph is in an idle state, and if there is some job queued, this kicks off the next job. Sets the graph state to :working. </p></div></div></div><div class="public anchor" id="var-recoverable-error-fn"><h3>recoverable-error-fn</h3><div class="usage"><code>(recoverable-error-fn graph)</code></div><div class="doc"><div class="markdown"><p>This is designed to be the default error handler for edges. Depending on whether the error is a timeout or something else, this delivers an IExceptionInfo with the detailed messages to the current promise (if there is one), then sets the graph status to :error.</p></div></div></div><div class="public anchor" id="var-stop-flow"><h3>stop-flow</h3><div class="usage"><code>(stop-flow graph)</code></div><div class="doc"><div class="markdown"><p>Designed to be called when tearing down a flow graph. This sets the graph status to :shutdown, delivers IllegalStateExceptions to current and all queued promises, instructs the executor to shutdownNow(), and signals any currently running threads to :die.</p></div></div></div><div class="public anchor" id="var-thread-flow"><h3>thread-flow</h3><div class="usage"><code>(thread-flow graph)</code></div><div class="doc"><div class="markdown"><p>Over-arching thread flow. As long as the current thread is not interrupted, the graph state is not set to :shutdown, and the thread hasn’t been signalled to :die, this does a work-loop until exiting, decrements the graph’s active thread count, and waits for another signal. In the event that this is the last thread to go into waiting status, it is responsible for delivering a completed job and for handling :error and :broken states.</p></div></div></div><div class="public anchor" id="var-unless-shutdown"><h3>unless-shutdown</h3><div class="usage"><code>(unless-shutdown old new)</code></div><div class="doc"><div class="markdown"><p>Use this with swap! instead of reset! on the graph’s status, unless you’re explicitly starting it back up after it’s been shut down.</p></div></div></div><div class="public anchor" id="var-when-viable"><h3>when-viable</h3><div class="usage"><code>(when-viable old new)</code></div><div class="doc"><div class="markdown"><p>Use this with swap! instead of reset! on the graph’s status for ‘normal’ operations. It won’t overwrite :shutdown, :error, :cancelled, or :broken states.</p></div></div></div></div></body></html>